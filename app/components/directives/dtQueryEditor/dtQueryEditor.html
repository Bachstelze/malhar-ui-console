<div class="query-editor">
    <tabset>
        <tab heading="Query" select="switchToDesignerMode();">
            <div class="properties-table">
                <div class="row">
                    <div class="cell">
                        <form>
                            <div ng-repeat="property in properties" class="row">
                                <div class="cell key-cell">
                                    <label>{{property.key}}</label>
                                </div>
                                <div class="cell">
                                    <input type="text" ng-model="property.value"/>
                                </div>
                                <div class="cell" ng-click="remove(property);">
                                    <span class="glyphicon glyphicon-remove"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="cell key-cell">
                                    <select ng-model="selOption" ng-options="opt for opt in options"
                                            ng-change="onChange(selOption)" class="form-control">
                                        <option value="">-- choose key --</option>
                                    </select>
                                </div>
                                <div class="cell">
                                    <input type="text" ng-model="selValue" />
                                </div>
                                <div class="cell" ng-click="add(selValue);">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div ng-if="false" class="cell" style="width:100%;">
                        <pre class="json-output">{{ngModel.$viewValue|json}}</pre>
                    </div>
                </div>
            </div>
        </tab>
        <tab heading="JSON" select="switchToJsonMode();">
            <div ng-if="jsonMode" ng-controller="QueryEditorJsonCtrl">
                <textarea ng-model="jsonText" ng-change="textChanged(jsonText);"></textarea>
                <div ng-if="!valid"class="alert alert-danger">
                    Invalid JSON
                </div>
            </div>
        </tab>
    </tabset>
</div>